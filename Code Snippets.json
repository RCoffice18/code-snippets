{
  "Environment Variable Loader with Dynamic File Loading": {
    "prefix": "envLoader",
    "body": [
      "const dotenv = require('dotenv');",
      "",
      "// Determine which .env file to load based on NODE_ENV",
      "const nodeEnv = process.env.NODE_ENV || 'development';",
      "const envFile = `.env.${nodeEnv}`;",
      "dotenv.config({ path: envFile });",
      "",
      "const requiredEnvVars = [",
      "    'DB_HOST',",
      "    'DB_PORT',",
      "    'DB_NAME',",
      "    'DB_USER',",
      "    'DB_PASS',",
      "    'APP_PORT',",
      "    'NODE_ENV',",
      "    'CACHE_HOST',",
      "    'CACHE_PORT',",
      "    'CACHE_TTL',",
      "    'API_KEY',",
      "    'SERVICE_URL',",
      "    'LOG_LEVEL',",
      "];",
      "",
      "const getEnv = (key, defaultValue = null) => {",
      "    const value = process.env[key];",
      "    if (value === undefined) {",
      "        if (defaultValue === null) {",
      "            throw new Error(`Missing required environment variable: ${key}`);",
      "        }",
      "        console.warn(`Environment variable ${key} not set. Using default value: ${defaultValue}`);",
      "    }",
      "    return value || defaultValue;",
      "};",
      "",
      "const validateEnvVars = () => {",
      "    requiredEnvVars.forEach((key) => {",
      "        if (!process.env[key]) {",
      "            throw new Error(`Missing required environment variable: ${key}`);",
      "        }",
      "    });",
      "};",
      "",
      "const appConfig = {",
      "    db: {",
      "        host: getEnv('DB_HOST', 'localhost'),",
      "        port: getEnv('DB_PORT', '5432'),",
      "        database: getEnv('DB_NAME'),",
      "        username: getEnv('DB_USER'),",
      "        password: getEnv('DB_PASS'),",
      "    },",
      "    app: {",
      "        port: getEnv('APP_PORT', '3000'),",
      "        env: getEnv('NODE_ENV', 'development'),",
      "    },",
      "    logging: {",
      "        level: getEnv('LOG_LEVEL', 'info'),",
      "    },",
      "    cache: {",
      "        host: getEnv('CACHE_HOST', 'localhost'),",
      "        port: getEnv('CACHE_PORT', '6379'),",
      "        ttl: getEnv('CACHE_TTL', '3600'),",
      "    },",
      "    api: {",
      "        key: getEnv('API_KEY'),",
      "        serviceUrl: getEnv('SERVICE_URL'),",
      "    },",
      "    security: {",
      "        jwtSecret: getEnv('JWT_SECRET'),",
      "        enableHttps: getEnv('ENABLE_HTTPS', 'false') === 'true',",
      "    },",
      "};",
      "",
      "validateEnvVars();",
      "",
      "const logConfig = () => {",
      "    console.log(`App running in ${appConfig.app.env} mode on port ${appConfig.app.port}`);",
      "};",
      "",
      "logConfig();",
      "",
      "module.exports = appConfig;"
    ],
    "description": "Environment variable loader that loads appropriate .env file based on NODE_ENV"
  }
}